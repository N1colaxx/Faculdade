NotaFiscal
   id_nf (pk)
   chave_acesso
   tipo_operacao (entrada/saída)
   modelo
   serie
   numero  
   data_emissao
   data_saida_entrada
   hora_saida_entrada
   natureza_da_operacao
   protocolo_autorizacao
   status (em digitação, validada, autorizada, cancelada, denegada)
   data_autorizacao
   valor_total_nf
   valor_total_produtos
   valor_total_servicos
   valor_desconto
   valor_outras_despesas
   valor_frete
   valor_total_impostos

   id_emitente (FK)
   id_destinatario (FK)
   id_remetente (FK)


TbStatus:
   id_status PK
   cod

DadosAdicionais
   id_dados_adicionais (PK)
   id_nf (FK)
   informacoes_complementares
   observacoes

ItemNotaFiscal
   id_item_nf (PK)
   id_nf (FK)
   id_produto (FK) (opcional)
   id_servico (FK) (opcional)
   cfop
   quantidade
   valor_unitario
   valor_desconto
   valor_total_item
   valor_total_impostos_item

Pessoa
   id_pessoa (PK)              
   tipo_pessoa                 
   tipo_documento              
   numero_documento            
   nome_razao_social 

PessoaFisica
   id_pf (PK)
   id_pessoa (FK) 
   cod

PessoaJuridica
   id_pj (PK)
   id_pessoa (FK)              
   nome_fantasia               
   regime_tributario           
   inscricao_estadual          
   inscricao_suframa           
   is_contribuinte_icms        
│  cnae_fiscal            

Emitente
   id_emitente (PK)
   id_pessoa(FK)

Destinatario
   id_destinatario (PK)
   id_pessoa (FK) 

Remetente
   id_remetente (PK)
   id_pessoa (FK)

DocumentoFiscal
   id_documento_fiscal (PK)
   id_pessoa (FK)
   tipo_documento
   numero_documento

Endereco
   id_endereco (PK)
   id_pessoa (FK)
   id_transportadora (FK)
   tipo (comercial, entrega, cobrança, etc.)
   logradouro
   numero
   complemento
   bairro
   municipio
   uf
   cep
   codigo_pais

Contato
   id_contato (PK)
   id_pessoa (FK)
   tipo (telefone, email, fax)
   ddd
   numero
   email

Produto
   id_produto (PK)
   codigo
   nome
   descricao
   ncm
   cest
   unidade_comercial
   valor_unitario

Servico
   id_servico (PK)
   codigo
   nome
   descricao
   valor_unitario

Imposto
   id_imposto (PK)
   codigo
   nome
   descricao

TipoImposto
   id_tipo_imposto (PK)
   id_imposto (FK)
   codigo_tipo (ICMS, IPI, PIS, COFINS, etc.)
   descricao_tipo

ImpostoItem
   id_imposto_item (PK)
   id_item_nf (FK)
   id_tipo_imposto (FK)
   situacao_tributaria (CST/CSOSN)
   base_calculo
   aliquota
   valor
   base_calculo_st (quando aplicável)
   aliquota_st (quando aplicável)
   valor_st (quando aplicável)
   valor_fcp (quando aplicável)

Frete
   id_frete (PK)
   id_nf (FK)
   id_transportadora (FK)
   tipo_frete (CIF, FOB, etc.)
   placa_veiculo
   uf_veiculo
   valor_frete

VolumeTransportado
   id_volume (PK)
   id_frete (FK)
   quantidade
   especie
   marca
   numeracao
   peso_bruto
   peso_liquido

Transportadora
   id_transportadora (PK)
   nome
   cnpj

EventoNF
   id_evento (PK)
   id_nf (FK)
   tipo_evento (emissão, cancelamento, correção, etc.)
   motivo
   data_hora
   usuario
   xml_referencia (quando aplicável)

Fatura
   id_fatura (PK)
   id_nf (FK)
   numero
   valor
   data_vencimento

Pagamento
   id_pagamento (PK)
   id_nf (FK)
   id_forma_pagamento (FK)
   valor
   data_pagamento
   status

FormaPagamento
   id_forma_pagamento (PK)
   codigo
   descricao (dinheiro, cartão, etc.)



   DerDiagram
    NotaFiscal ||--o{ ItemNotaFiscal : "1:N (Uma nota contém vários itens)"
    NotaFiscal ||--|| DadosAdicionais : "1:1 (Uma nota possui um dado adicional)"
    NotaFiscal }|--|| Pessoa : "N:1 (Uma nota é emitida por uma pessoa)"
    NotaFiscal }|--|| Pessoa : "N:1 (Uma nota é destinada a uma pessoa)"
    NotaFiscal ||--o{ EventoNF : "1:N (Uma nota possui vários eventos)"
    NotaFiscal ||--o{ Pagamento : "1:N (Uma nota possui vários pagamentos)"
    NotaFiscal ||--o| Frete : "1:0..1 (Uma nota pode ter um frete)"
    NotaFiscal ||--o{ Fatura : "1:N (Uma nota pode ter várias faturas)"
    
    Pessoa ||--o{ Endereco : "1:N (Uma pessoa possui vários endereços)"
    Pessoa ||--o{ Contato : "1:N (Uma pessoa possui vários contatos)"
    Pessoa ||--o{ DocumentoFiscal : "1:N (Uma pessoa possui vários documentos)"
    
    ItemNotaFiscal }|--|| Produto : "N:1 (Um item referencia um produto)"
    ItemNotaFiscal }|--|| Servico : "N:1 (Um item referencia um serviço)"
    ItemNotaFiscal ||--o{ ImpostoItem : "1:N (Um item tem vários impostos)"
    
    ImpostoItem }|--|| TipoImposto : "N:1 (Um imposto de item é de um tipo específico)"
    TipoImposto }|--|| Imposto : "N:1 (Um tipo de imposto pertence a um imposto)"
    
    Frete }|--|| Pessoa : "N:1 (Um frete é transportado por uma pessoa)"
    Frete ||--|| VolumeTransportado : "1:1 (Um frete possui um volume)"
    
    Pagamento }|--|| FormaPagamento : "N:1 (Um pagamento utiliza uma forma)"